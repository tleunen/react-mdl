sudo: false
language: node_js
matrix:
  include:
    - node_js: stable
      env: SEND_COVERAGE=yes
    - node_js: 5
    - node_js: 4
before_install:
  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
script:
  - npm t
after_success:
  # report coverage to coveralls
  - if [ "$SEND_COVERAGE" == "yes" ]; then echo "coveralls..." && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js; fi
  # report coverage to codecov.io
  - if [ "$SEND_COVERAGE" == "yes" ]; then bash <(curl https://codecov.io/bash); fi
branches:
  only:
    - master
    - v2
